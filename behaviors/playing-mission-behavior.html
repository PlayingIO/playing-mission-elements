<link rel="import" href="../../mostly-elements/behaviors/mostly-func-behavior.html">

<script>
  var Playing = Playing || {};

  /**
   * @polymerBehavior Playing.MissionBehavior
   */
  Playing.MissionBehavior = [Mostly.FuncBehavior, {

    properties: {
      activiteTypes: {
        type: Array,
        value: ['single', 'sequential', 'parallel', 'exclusive']
      }
    },

    missionPath(mission) {
      if (mission && mission.id) {
        return 'missions/' + mission.id;
      } else {
        return 'missions/' + mission;
      }
    },

    layoutHref(type, layout) {
      return layout && this.resolveUrl(`playing-${layout}-${type}.html`);
    },

    layoutModel() {
      return {
        mission: this.mission,
        "new": true
      };
    },

    layoutActivities() {
      return {
        activites: this.mission && this.mission.activites
      };
    },

    emptyMission() {
      return { access: [], activites: [], settings: {} };
    },

    resetFields() {
      this.mission = this.emptyMission();
      this.errors = '';
    },

    hasErrors() {
      return this.errors !== '';
    }
  }];
</script>
